<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMO –ü–æ—Ä—Ç—Ñ–µ–ª—å –ø—Ä–æ–µ–∫—Ç–æ–≤ - –£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px; }
        .kpi-card { background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; text-align: center; backdrop-filter: blur(10px); }
        .kpi-value { font-size: 32px; font-weight: bold; margin-bottom: 5px; }
        .kpi-red { color: #ff4757; }
        .kpi-yellow { color: #ffa502; }
        .kpi-green { color: #2ed573; }
        
        .nav-tabs { display: flex; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .nav-tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; background: #f1f3f4; border: none; font-weight: 500; transition: all 0.3s; }
        .nav-tab.active { background: #1e3c72; color: white; }
        
        .tab-content { display: none; background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .tab-content.active { display: block; }
        
        .filters { display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; align-items: center; }
        .filter-group { display: flex; gap: 10px; align-items: center; }
        .filter-group label { font-weight: 500; min-width: 120px; }
        select, input { padding: 8px 12px; border: 2px solid #e0e6ed; border-radius: 6px; font-size: 14px; }
        .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; transition: all 0.3s; }
        .btn-primary { background: #1e3c72; color: white; }
        .btn-primary:hover { background: #2a5298; }
        .btn-success { background: #2ed573; color: white; }
        
        .charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .chart-container { background: #fafbfc; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); height: 400px; }
        .chart-title { font-size: 18px; font-weight: 600; margin-bottom: 15px; color: #1e3c72; }
        
        .projects-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .projects-table th { background: #1e3c72; color: white; padding: 15px 12px; text-align: left; font-weight: 600; }
        .projects-table td { padding: 12px; border-bottom: 1px solid #eee; }
        .projects-table tr:hover { background: #f8f9ff; }
        .status-badge { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; }
        .status-green { background: #d4edda; color: #155724; }
        .status-yellow { background: #fff3cd; color: #856404; }
        .status-red { background: #f8d7da; color: #721c24; }
        
        .project-card { display: none; background: white; border-radius: 12px; padding: 25px; box-shadow: 0 8px 30px rgba(0,0,0,0.12); margin-top: 20px; }
        .project-card.active { display: block; }
        .project-header { display: flex; gap: 20px; margin-bottom: 25px; align-items: flex-start; }
        .project-info { flex: 1; }
        .project-title { font-size: 24px; font-weight: 700; color: #1e3c72; margin-bottom: 10px; }
        .project-meta { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 20px; }
        .meta-item { display: flex; flex-direction: column; }
        .meta-label { font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; }
        .meta-value { font-size: 16px; font-weight: 600; color: #1e3c72; }
        
        @media (max-width: 768px) {
            .charts-grid { grid-template-columns: 1fr; }
            .filters { flex-direction: column; align-items: stretch; }
            .filter-group { flex-direction: column; align-items: stretch; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä PMO –ü–æ—Ä—Ç—Ñ–µ–ª—å –ø—Ä–æ–µ–∫—Ç–æ–≤</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞. EVM + –†–∏—Å–∫–∏ + –ü—Ä–æ–≥—Ä–µ—Å—Å.</p>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-value" id="totalProjects">12</div>
                    <div>–í—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value" id="totalBudget">2,450</div>
                    <div>–û–±—â–∏–π –±—é–¥–∂–µ—Ç, –º–ª–Ω —Ç–≥</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-red" id="criticalProjects">3</div>
                    <div>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-yellow" id="avgCPI">0.92</div>
                    <div>–°—Ä–µ–¥–Ω–∏–π CPI</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-yellow" id="avgSPI">0.88</div>
                    <div>–°—Ä–µ–¥–Ω–∏–π SPI</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value kpi-red" id="totalRisks">7</div>
                    <div>–û—Ç–∫—Ä—ã—Ç—ã–µ —Ä–∏—Å–∫–∏</div>
                </div>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('portfolio')">üìà –ü–æ—Ä—Ç—Ñ–µ–ª—å</button>
            <button class="nav-tab" onclick="showTab('problems')">‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ</button>
            <button class="nav-tab" onclick="showTab('projects')">üìã –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤</button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ 1: –ü–æ—Ä—Ç—Ñ–µ–ª—å -->
        <div id="portfolio" class="tab-content active">
            <div class="filters">
                <div class="filter-group">
                    <label>–°—Ç–∞–¥–∏—è:</label>
                    <select id="stageFilter">
                        <option value="">–í—Å–µ</option>
                        <option value="–ò–¥–µ—è">–ò–¥–µ—è</option>
                        <option value="–¢–≠–û">–¢–≠–û</option>
                        <option value="–†–ü">–†–ü</option>
                        <option value="–°–ú–†">–°–ú–†</option>
                        <option value="–ü–ù–†">–ü–ù–†</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>–¢–∏–ø:</label>
                    <select id="typeFilter">
                        <option value="">–í—Å–µ</option>
                        <option value="CAPEX">CAPEX</option>
                        <option value="OPEX">OPEX</option>
                        <option value="HSE">HSE</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="filterData()">–§–∏–ª—å—Ç—Ä</button>
                <button class="btn btn-success" onclick="exportPDF()">üìÑ PDF</button>
            </div>
            
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">üéØ –ü—É–∑—ã—Ä—å–∫–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è (SPI vs CPI)</div>
                    <canvas id="bubbleChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">üìä EVM –ö—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
                    <canvas id="evmChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">üî• –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Ä–∏—Å–∫–æ–≤</div>
                    <canvas id="heatmapChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">üöÄ –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤</div>
                    <canvas id="funnelChart"></canvas>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ 2: –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã -->
        <div id="problems" class="tab-content">
            <div class="chart-title">üö® –¢–æ–ø-5 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</div>
            <table class="projects-table">
                <thead>
                    <tr>
                        <th>–ü—Ä–æ–µ–∫—Ç</th>
                        <th>CPI</th>
                        <th>SPI</th>
                        <th>Œî –ë—é–¥–∂–µ—Ç, –º–ª–Ω —Ç–≥</th>
                        <th>Œî –°—Ä–æ–∫–∏, –¥–Ω–µ–π</th>
                        <th>–†–∏—Å–∫–∏</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="problemsTable"></tbody>
            </table>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ 3: –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
        <div id="projects" class="tab-content">
            <table class="projects-table" id="projectsTable">
                <thead>
                    <tr>
                        <th>–ö–æ–¥</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>CPI/SPI</th>
                        <th>–ë—é–¥–∂–µ—Ç, –º–ª–Ω —Ç–≥</th>
                        <th>–°—Ä–æ–∫</th>
                        <th>–ü—Ä–æ–≥—Ä–µ—Å—Å %</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ -->
            <div id="projectCard" class="project-card">
                <div class="project-header">
                    <div class="project-info">
                        <div class="project-title" id="cardTitle"></div>
                        <div class="project-meta">
                            <div class="meta-item">
                                <div class="meta-label">–ó–∞–∫–∞–∑—á–∏–∫</div>
                                <div class="meta-value" id="cardCustomer"></div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">–ú–µ–Ω–µ–¥–∂–µ—Ä</div>
                                <div class="meta-value" id="cardManager"></div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">–°—Ç–∞–¥–∏—è</div>
                                <div class="meta-value" id="cardStage"></div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">–ë—é–¥–∂–µ—Ç</div>
                                <div class="meta-value" id="cardBudget"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <div class="chart-title">üìà EVM –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞</div>
                        <canvas id="projectEVM" height="200"></canvas>
                    </div>
                    <div>
                        <div class="chart-title">üìä –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç</div>
                        <canvas id="projectProgress" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // –ú–û–î–ï–õ–¨ –î–ê–ù–ù–´–• PMO - –ï–î–ò–ù–´–ô –†–ï–ï–°–¢–†
        // ========================================
        const projectsData = [
            {
                id: "PRJ-001", name: "–ó–∞–≤–æ–¥ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É —É–¥–æ–±—Ä–µ–Ω–∏–π", type: "CAPEX", category: "–ö—Ä—É–ø–Ω—ã–π",
                customer: "–î–∏—Ä–µ–∫—Ü–∏—è –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É", manager: "–ò–≤–∞–Ω–æ–≤ –ò.–ò.", stage: "–°–ú–†",
                startPlan: "2025-01-15", startFact: "2025-01-15", endPlan: "2026-06-30", endForecast: "2026-09-15",
                isCriticalPath: true, daysDelay: 45, bac: 850, ev: 420, ac: 480, eac: 920,
                smrPlan: 65, smrFact: 52, pnr: 0, equipment: 85,
                riskSchedule: 3, riskCost: 2, riskContract: 1, openIssues: 4, changeRequests: 2,
                cpi: 0.875, spi: 0.82, status: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π"
            },
            {
                id: "PRJ-002", name: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–∫–ª–∞–¥–∞", type: "IT", category: "–°—Ä–µ–¥–Ω–∏–π",
                customer: "–õ–æ–≥–∏—Å—Ç–∏–∫–∞", manager: "–ü–µ—Ç—Ä–æ–≤–∞ –ê.–í.", stage: "–ü–ù–†",
                startPlan: "2025-03-01", startFact: "2025-03-10", endPlan: "2025-12-15", endForecast: "2025-12-20",
                isCriticalPath: false, daysDelay: 5, bac: 120, ev: 95, ac: 102, eac: 128,
                smrPlan: 100, smrFact: 100, pnr: 85, equipment: 100,
                riskSchedule: 1, riskCost: 1, riskContract: 2, openIssues: 1, changeRequests: 0,
                cpi: 0.931, spi: 0.95, status: "–ù–æ—Ä–º–∞"
            },
            {
                id: "PRJ-003", name: "–†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–æ—Ç–µ–ª—å–Ω–æ–π", type: "HSE", category: "–°—Ä–µ–¥–Ω–∏–π",
                customer: "–¢–≠–¶", manager: "–°–∏–¥–æ—Ä–æ–≤ –í.–ü.", stage: "–†–ü",
                startPlan: "2025-02-01", startFact: "2025-03-15", endPlan: "2025-11-30", endForecast: "2026-02-28",
                isCriticalPath: true, daysDelay: 60, bac: 320, ev: 45, ac: 80, eac: 420,
                smrPlan: 15, smrFact: 12, pnr: 0, equipment: 20,
                riskSchedule: 3, riskCost: 3, riskContract: 3, openIssues: 8, changeRequests: 3,
                cpi: 0.563, spi: 0.65, status: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π"
            },
            {
                id: "PRJ-004", name: "–°–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ–µ—Ä–º–∞", type: "IT", category: "–ö—Ä—É–ø–Ω—ã–π",
                customer: "IT –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç", manager: "–ö–æ–∑–ª–æ–≤–∞ –ï.–°.", stage: "–¢–≠–û",
                startPlan: "2025-04-01", startFact: null, endPlan: "2026-03-31", endForecast: null,
                isCriticalPath: false, daysDelay: 0, bac: 650, ev: 12, ac: 15, eac: 680,
                smrPlan: 2, smrFact: 1, pnr: 0, equipment: 5,
                riskSchedule: 2, riskCost: 1, riskContract: 1, openIssues: 2, changeRequests: 1,
                cpi: 0.80, spi: 0.75, status: "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"
            },
            {
                id: "PRJ-005", name: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è", type: "OPEX", category: "–ú–∞–ª—ã–π",
                customer: "–≠–Ω–µ—Ä–≥–æ", manager: "–ú–∏—Ö–∞–π–ª–æ–≤ –î.–ê.", stage: "–ü–ù–†",
                startPlan: "2025-01-20", startFact: "2025-01-22", endPlan: "2025-06-30", endForecast: "2025-07-10",
                isCriticalPath: false, daysDelay: 10, bac: 45, ev: 88, ac: 42, eac: 48,
                smrPlan: 100, smrFact: 100, pnr: 92, equipment: 98,
                riskSchedule: 1, riskCost: 1, riskContract: 1, openIssues: 0, changeRequests: 0,
                cpi: 2.095, spi: 1.12, status: "–û—Ç–ª–∏—á–Ω–æ"
            },
            {
                id: "PRJ-006", name: "–ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è –ö–ò–ü–∏–ê", type: "CAPEX", category: "–°—Ä–µ–¥–Ω–∏–π",
                customer: "–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ", manager: "–§–µ–¥–æ—Ä–æ–≤–∞ –û.–ù.", stage: "–°–ú–†",
                startPlan: "2025-05-01", startFact: "2025-05-15", endPlan: "2026-01-31", endForecast: "2026-03-15",
                isCriticalPath: true, daysDelay: 45, bac: 280, ev: 35, ac: 48, eac: 340,
                smrPlan: 18, smrFact: 12, pnr: 0, equipment: 25,
                riskSchedule: 3, riskCost: 2, riskContract: 2, openIssues: 5, changeRequests: 2,
                cpi: 0.729, spi: 0.68, status: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π"
            },
            {
                id: "PRJ-007", name: "–°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è", type: "IT", category: "–ú–∞–ª—ã–π",
                customer: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", manager: "–ù–∏–∫–æ–ª–∞–µ–≤ –°.–ú.", stage: "–ò–¥–µ—è",
                startPlan: null, startFact: null, endPlan: "2025-12-31", endForecast: null,
                isCriticalPath: false, daysDelay: 0, bac: 28, ev: 0, ac: 0, eac: 32,
                smrPlan: 0, smrFact: 0, pnr: 0, equipment: 0,
                riskSchedule: 1, riskCost: 1, riskContract: 1, openIssues: 1, changeRequests: 0,
                cpi: 0, spi: 0, status: "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"
            }
        ];

        let currentFilter = { stage: '', type: '' };
        let filteredData = [...projectsData];
        let charts = {};

        // ========================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            updateKPIs();
            initCharts();
            renderProjectsTable();
            renderProblemsTable();
        });

        // ========================================
        // KPI –ò–ù–î–ò–ö–ê–¢–û–†–´
        // ========================================
        function updateKPIs() {
            const totalProjectsEl = document.getElementById('totalProjects');
            const totalBudgetEl = document.getElementById('totalBudget');
            const criticalProjectsEl = document.getElementById('criticalProjects');
            const avgCPIEl = document.getElementById('avgCPI');
            const avgSPIEl = document.getElementById('avgSPI');
            const totalRisksEl = document.getElementById('totalRisks');

            const data = filteredData;
            totalProjectsEl.textContent = data.length;
            totalBudgetEl.textContent = Math.round(data.reduce((sum, p) => sum + p.bac, 0)/1000);
            
            const critical = data.filter(p => p.status === '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π').length;
            criticalProjectsEl.textContent = critical;
            criticalProjectsEl.className = critical > 2 ? 'kpi-value kpi-red' : critical > 0 ? 'kpi-value kpi-yellow' : 'kpi-value kpi-green';
            
            const avgCPI = data.reduce((sum, p) => sum + (p.cpi || 0), 0) / data.length;
            const avgSPI = data.reduce((sum, p) => sum + (p.spi || 0), 0) / data.length;
            avgCPIEl.textContent = avgCPI.toFixed(2);
            avgSPIEl.textContent = avgSPI.toFixed(2);
            
            avgCPIEl.className = avgCPI >= 1 ? 'kpi-value kpi-green' : avgCPI >= 0.9 ? 'kpi-value kpi-yellow' : 'kpi-value kpi-red';
            avgSPIEl.className = avgSPI >= 1 ? 'kpi-value kpi-green' : avgSPI >= 0.9 ? 'kpi-value kpi-yellow' : 'kpi-value kpi-red';
            
            const totalRisks = data.reduce((sum, p) => sum + p.openIssues, 0);
            totalRisksEl.textContent = totalRisks;
        }

        // ========================================
        // –ì–†–ê–§–ò–ö–ò
        // ========================================
        function initCharts() {
            // –ü—É–∑—ã—Ä—å–∫–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
            const bubbleCtx = document.getElementById('bubbleChart').getContext('2d');
            charts.bubble = new Chart(bubbleCtx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: '–ü—Ä–æ–µ–∫—Ç—ã',
                        data: filteredData.map(p => ({
                            x: p.spi * 100, y: p.cpi * 100, r: p.bac / 100,
                            projectId: p.id, stage: p.stage
                        })),
                        backgroundColor: ctx => {
                            const stage = ctx.raw.stage;
                            const colors = {
                                '–ò–¥–µ—è': 'rgba(255,193,7,0.6)', '–¢–≠–û': 'rgba(255,193,7,0.6)',
                                '–†–ü': 'rgba(40,167,69,0.6)', '–°–ú–†': 'rgba(0,123,255,0.6)',
                                '–ü–ù–†': 'rgba(108,117,125,0.6)'
   
